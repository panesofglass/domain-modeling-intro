<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Domain Modeling with Types</title>
    <meta name="description" content="Domain Modeling with Types (using F#)">
    <meta name="author" content="Ryan Riley (@panesofglass)">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="//code.jquery.com/jquery-1.8.0.js"></script>
    <script src="//code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/night.css" id="theme">
    <link type="text/css" rel="stylesheet" href="fsharp.formatting/styles/style.css" />
    <link type="text/css" rel="stylesheet" href="fsharp.formatting/styles/deedle.css" />
    <link type="text/css" rel="stylesheet" href="css/custom.css" />
    <script src="fsharp.formatting/styles/tips.js" type="text/javascript"></script>
    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">
    <link rel="stylesheet" href="css/fsreveal.css">
    <!-- If the query includes 'print-pdf', include the PDF print sheet -->
    <script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
    </script>
    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
    <script language="javascript" type="text/javascript">
        function init()
        {
            websocket = new WebSocket("ws://"+window.location.host+"/websocket");
            websocket.onmessage = function(evt) { location.reload(); };
        }
        window.addEventListener("load", init, false);
    </script>
</head>
<body>
    <div class="reveal">
        <div class="tip" id="fs1">type City = string<br /><br />Full name: Index.Alias.City</div>
<div class="tip" id="fs2">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.Operators.string<br /><br />--------------------<br />type string = System.String<br /><br />Full name: Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs3">Multiple items<br />union case City.City: string -&gt; City<br /><br />--------------------<br />type City = | City of string<br /><br />Full name: Index.SingleCase.City</div>
<div class="tip" id="fs4">val city : City<br /><br />Full name: Index.SingleCase.city</div>
<div class="tip" id="fs5">val cityName : City -&gt; string<br /><br />Full name: Index.SingleCase.cityName</div>
<div class="tip" id="fs6">val name : string</div>
<div class="tip" id="fs7">val result : string<br /><br />Full name: Index.SingleCase.result</div>
<div class="tip" id="fs8">type ILocatable =<br />&#160;&#160;interface<br />&#160;&#160;&#160;&#160;abstract member Latitude : float<br />&#160;&#160;&#160;&#160;abstract member Longitude : float<br />&#160;&#160;end<br /><br />Full name: Index.ILocatable</div>
<div class="tip" id="fs9">abstract member ILocatable.Latitude : float<br /><br />Full name: Index.ILocatable.Latitude</div>
<div class="tip" id="fs10">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.float<br /><br />--------------------<br />type float = System.Double<br /><br />Full name: Microsoft.FSharp.Core.float<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; = float<br /><br />Full name: Microsoft.FSharp.Core.float&lt;_&gt;</div>
<div class="tip" id="fs11">abstract member ILocatable.Longitude : float<br /><br />Full name: Index.ILocatable.Longitude</div>
<div class="tip" id="fs12">type Place =<br />&#160;&#160;{Name: string;<br />&#160;&#160;&#160;Latitude: float;<br />&#160;&#160;&#160;Longitude: float;}<br />&#160;&#160;interface ILocatable<br /><br />Full name: Index.FirstTry.Place</div>
<div class="tip" id="fs13">Place.Name: string</div>
<div class="tip" id="fs14">Place.Latitude: float</div>
<div class="tip" id="fs15">Place.Longitude: float</div>
<div class="tip" id="fs16">val this : Place</div>
<div class="tip" id="fs17">override Place.Latitude : float<br /><br />Full name: Index.FirstTry.Place.Latitude</div>
<div class="tip" id="fs18">override Place.Longitude : float<br /><br />Full name: Index.FirstTry.Place.Longitude</div>
<div class="tip" id="fs19">type Place =<br />&#160;&#160;{Name: string;<br />&#160;&#160;&#160;Latitude: float option;<br />&#160;&#160;&#160;Longitude: float option;}<br />&#160;&#160;member GetLocation : unit -&gt; ILocatable option<br /><br />Full name: Index.OptionalLocation.Place</div>
<div class="tip" id="fs20">Place.Latitude: float option</div>
<div class="tip" id="fs21">type &#39;T option = Option&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Core.option&lt;_&gt;</div>
<div class="tip" id="fs22">Place.Longitude: float option</div>
<div class="tip" id="fs23">member Place.GetLocation : unit -&gt; ILocatable option<br /><br />Full name: Index.OptionalLocation.Place.GetLocation</div>
<div class="tip" id="fs24">union case Option.Some: Value: &#39;T -&gt; Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs25">val lat : float</div>
<div class="tip" id="fs26">val lng : float</div>
<div class="tip" id="fs27">val this : ILocatable</div>
<div class="tip" id="fs28">property ILocatable.Latitude: float</div>
<div class="tip" id="fs29">property ILocatable.Longitude: float</div>
<div class="tip" id="fs30">union case Option.None: Option&lt;&#39;T&gt;</div>
<div class="tip" id="fs31">type Location =<br />&#160;&#160;{Latitude: float;<br />&#160;&#160;&#160;Longitude: float;}<br /><br />Full name: Index.Revised.Location</div>
<div class="tip" id="fs32">Location.Latitude: float</div>
<div class="tip" id="fs33">Location.Longitude: float</div>
<div class="tip" id="fs34">type Place =<br />&#160;&#160;{Name: string;<br />&#160;&#160;&#160;Location: Location option;}<br /><br />Full name: Index.Revised.Place</div>
<div class="tip" id="fs35">Multiple items<br />Place.Location: Location option<br /><br />--------------------<br />type Location =<br />&#160;&#160;{Latitude: float;<br />&#160;&#160;&#160;Longitude: float;}<br /><br />Full name: Index.Revised.Location</div>
<div class="tip" id="fs36">type Location =<br />&#160;&#160;{Latitude: float;<br />&#160;&#160;&#160;Longitude: float;}<br /><br />Full name: Index.ExtendedExample.Location</div>
<div class="tip" id="fs37">type XYCoord =<br />&#160;&#160;{X: float;<br />&#160;&#160;&#160;Y: float;}<br /><br />Full name: Index.ExtendedExample.XYCoord</div>
<div class="tip" id="fs38">XYCoord.X: float</div>
<div class="tip" id="fs39">XYCoord.Y: float</div>
<div class="tip" id="fs40">type Place =<br />&#160;&#160;{Name: string;<br />&#160;&#160;&#160;Surface: Location option;<br />&#160;&#160;&#160;Downhole: Location option;<br />&#160;&#160;&#160;Coord: XYCoord option;}<br /><br />Full name: Index.ExtendedExample.Place</div>
<div class="tip" id="fs41">Place.Surface: Location option</div>
<div class="tip" id="fs42">Place.Downhole: Location option</div>
<div class="tip" id="fs43">Place.Coord: XYCoord option</div>
<div class="tip" id="fs44">Multiple items<br />type MeasureAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : unit -&gt; MeasureAttribute<br /><br />Full name: Microsoft.FSharp.Core.MeasureAttribute<br /><br />--------------------<br />new : unit -&gt; MeasureAttribute</div>
<div class="tip" id="fs45">[&lt;Measure&gt;]<br />type degLat<br /><br />Full name: Index.degLat</div>
<div class="tip" id="fs46">[&lt;Measure&gt;]<br />type degLng<br /><br />Full name: Index.degLng</div>
<div class="tip" id="fs47">val degreesLatitude : x:float&lt;&#39;u&gt; -&gt; float&lt;&#39;u degLat&gt;<br /><br />Full name: Index.degreesLatitude</div>
<div class="tip" id="fs48">val x : float&lt;&#39;u&gt;</div>
<div class="tip" id="fs49">val degreesLongitude : x:float&lt;&#39;u&gt; -&gt; float&lt;&#39;u degLng&gt;<br /><br />Full name: Index.degreesLongitude</div>
<div class="tip" id="fs50">val degLatResult : float&lt;degLat&gt;<br /><br />Full name: Index.degLatResult</div>
<div class="tip" id="fs51">val degLngResult : float&lt;degLng&gt;<br /><br />Full name: Index.degLngResult</div>
<div class="tip" id="fs52">module SingleCase<br /><br />from Index</div>
<div class="tip" id="fs53">type Location =<br />&#160;&#160;{Latitude: float&lt;degLat&gt;;<br />&#160;&#160;&#160;Longitude: float&lt;degLng&gt;;}<br /><br />Full name: Index.UnitsOfMeasure.Location</div>
<div class="tip" id="fs54">Location.Latitude: float&lt;degLat&gt;</div>
<div class="tip" id="fs55">Location.Longitude: float&lt;degLng&gt;</div>
<div class="tip" id="fs56">type Place =<br />&#160;&#160;{Name: City;<br />&#160;&#160;&#160;Location: Location option;}<br /><br />Full name: Index.UnitsOfMeasure.Place</div>
<div class="tip" id="fs57">Place.Name: City</div>
<div class="tip" id="fs58">Multiple items<br />Place.Location: Location option<br /><br />--------------------<br />type Location =<br />&#160;&#160;{Latitude: float&lt;degLat&gt;;<br />&#160;&#160;&#160;Longitude: float&lt;degLng&gt;;}<br /><br />Full name: Index.UnitsOfMeasure.Location</div>
<div class="tip" id="fs59">Multiple items<br />union case City.City: name: string -&gt; City<br /><br />--------------------<br />type City =<br />&#160;&#160;| City of name: string<br />&#160;&#160;static member Create : name:string -&gt; City<br /><br />Full name: Index.City</div>
<div class="tip" id="fs60">static member City.Create : name:string -&gt; City<br /><br />Full name: Index.City.Create</div>
<div class="tip" id="fs61">val invalidArg : argumentName:string -&gt; message:string -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.Operators.invalidArg</div>
<div class="tip" id="fs62">val x : string</div>
<div class="tip" id="fs63">type Location =<br />&#160;&#160;internal {latitude: float&lt;degLat&gt;;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;longitude: float&lt;degLng&gt;;}<br />&#160;&#160;override ToString : unit -&gt; string<br />&#160;&#160;member Latitude : float&lt;degLat&gt;<br />&#160;&#160;member Longitude : float&lt;degLng&gt;<br />&#160;&#160;static member Create : lat:float&lt;degLat&gt; * lng:float&lt;degLng&gt; -&gt; Location<br /><br />Full name: Index.Location</div>
<div class="tip" id="fs64">Location.latitude: float&lt;degLat&gt;</div>
<div class="tip" id="fs65">Location.longitude: float&lt;degLng&gt;</div>
<div class="tip" id="fs66">val this : Location</div>
<div class="tip" id="fs67">member Location.Latitude : float&lt;degLat&gt;<br /><br />Full name: Index.Location.Latitude</div>
<div class="tip" id="fs68">member Location.Longitude : float&lt;degLng&gt;<br /><br />Full name: Index.Location.Longitude</div>
<div class="tip" id="fs69">static member Location.Create : lat:float&lt;degLat&gt; * lng:float&lt;degLng&gt; -&gt; Location<br /><br />Full name: Index.Location.Create</div>
<div class="tip" id="fs70">val lat : float&lt;degLat&gt;</div>
<div class="tip" id="fs71">val lng : float&lt;degLng&gt;</div>
<div class="tip" id="fs72">override Location.ToString : unit -&gt; string<br /><br />Full name: Index.Location.ToString</div>
<div class="tip" id="fs73">val sprintf : format:Printf.StringFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.sprintf</div>
<div class="tip" id="fs74">property Location.Latitude: float&lt;degLat&gt;</div>
<div class="tip" id="fs75">property Location.Longitude: float&lt;degLng&gt;</div>
<div class="tip" id="fs76">type Place =<br />&#160;&#160;{Name: City;<br />&#160;&#160;&#160;Location: Location option;}<br /><br />Full name: Index.Place</div>
<div class="tip" id="fs77">Multiple items<br />Place.Location: Location option<br /><br />--------------------<br />type Location =<br />&#160;&#160;internal {latitude: float&lt;degLat&gt;;<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;longitude: float&lt;degLng&gt;;}<br />&#160;&#160;override ToString : unit -&gt; string<br />&#160;&#160;member Latitude : float&lt;degLat&gt;<br />&#160;&#160;member Longitude : float&lt;degLng&gt;<br />&#160;&#160;static member Create : lat:float&lt;degLat&gt; * lng:float&lt;degLng&gt; -&gt; Location<br /><br />Full name: Index.Location</div>
<div class="tip" id="fs78">[&lt;Measure&gt;]<br />type m<br /><br />Full name: Index.m</div>
<div class="tip" id="fs79">[&lt;Measure&gt;]<br />type ft<br /><br />Full name: Index.ft</div>
<div class="tip" id="fs80">type LookupLocations = City * City -&gt; Place * Place<br /><br />Full name: Index.LookupLocations</div>
<div class="tip" id="fs81">type TryFindDistance = Place * Place -&gt; float&lt;m&gt; option<br /><br />Full name: Index.TryFindDistance</div>
<div class="tip" id="fs82">type MetersToFeet = float&lt;m&gt; -&gt; float&lt;ft&gt;<br /><br />Full name: Index.MetersToFeet</div>
<div class="tip" id="fs83">type Show = Place * Place * float&lt;ft&gt; option -&gt; string<br /><br />Full name: Index.Show</div>
<div class="tip" id="fs84">namespace System</div>
<div class="tip" id="fs85">[&lt;Measure&gt;]<br />type rad<br /><br />Full name: Index.GeoCoordinate.rad</div>
<div class="tip" id="fs86">val private degreesToRadians : value:float&lt;&#39;u&gt; -&gt; float&lt;&#39;u&gt;<br /><br />Full name: Index.GeoCoordinate.degreesToRadians</div>
<div class="tip" id="fs87">val value : float&lt;&#39;u&gt;</div>
<div class="tip" id="fs88">Multiple items<br />val float : value:&#39;T -&gt; float (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.float<br /><br />--------------------<br />type float = Double<br /><br />Full name: Microsoft.FSharp.Core.float<br /><br />--------------------<br />type float&lt;&#39;Measure&gt; = float<br /><br />Full name: Microsoft.FSharp.Core.float&lt;_&gt;</div>
<div class="tip" id="fs89">type Math =<br />&#160;&#160;static val PI : float<br />&#160;&#160;static val E : float<br />&#160;&#160;static member Abs : value:sbyte -&gt; sbyte + 6 overloads<br />&#160;&#160;static member Acos : d:float -&gt; float<br />&#160;&#160;static member Asin : d:float -&gt; float<br />&#160;&#160;static member Atan : d:float -&gt; float<br />&#160;&#160;static member Atan2 : y:float * x:float -&gt; float<br />&#160;&#160;static member BigMul : a:int * b:int -&gt; int64<br />&#160;&#160;static member Ceiling : d:decimal -&gt; decimal + 1 overload<br />&#160;&#160;static member Cos : d:float -&gt; float<br />&#160;&#160;...<br /><br />Full name: System.Math</div>
<div class="tip" id="fs90">field Math.PI = 3.14159265359</div>
<div class="tip" id="fs91">val private degLatToRad : lat:float&lt;degLat&gt; -&gt; float&lt;rad&gt;<br /><br />Full name: Index.GeoCoordinate.degLatToRad</div>
<div class="tip" id="fs92">val private degLngToRad : lng:float&lt;degLng&gt; -&gt; float&lt;rad&gt;<br /><br />Full name: Index.GeoCoordinate.degLngToRad</div>
<div class="tip" id="fs93">val private haversine : theta:float&lt;rad&gt; -&gt; float<br /><br />Full name: Index.GeoCoordinate.haversine</div>
<div class="tip" id="fs94">val theta : float&lt;rad&gt;</div>
<div class="tip" id="fs95">Math.Cos(d: float) : float</div>
<div class="tip" id="fs96">type private Pos =<br />&#160;&#160;{phi: float&lt;rad&gt;;<br />&#160;&#160;&#160;psi: float&lt;rad&gt;;}<br /><br />Full name: Index.GeoCoordinate.Pos</div>
<div class="tip" id="fs97">Pos.phi: float&lt;rad&gt;</div>
<div class="tip" id="fs98">Pos.psi: float&lt;rad&gt;</div>
<div class="tip" id="fs99">val private toPos : a:Location -&gt; Pos<br /><br />Full name: Index.GeoCoordinate.toPos</div>
<div class="tip" id="fs100">val a : Location</div>
<div class="tip" id="fs101">val private sub : a:Pos -&gt; b:Pos -&gt; Pos<br /><br />Full name: Index.GeoCoordinate.sub</div>
<div class="tip" id="fs102">val a : Pos</div>
<div class="tip" id="fs103">val b : Pos</div>
<div class="tip" id="fs104">val private earthRadius : float&lt;m&gt;<br /><br />Full name: Index.GeoCoordinate.earthRadius</div>
<div class="tip" id="fs105">val distance : a:Location -&gt; b:Location -&gt; float&lt;m&gt;<br /><br />Full name: Index.GeoCoordinate.distance</div>
<div class="tip" id="fs106">val b : Location</div>
<div class="tip" id="fs107">val h : float</div>
<div class="tip" id="fs108">Math.Asin(d: float) : float</div>
<div class="tip" id="fs109">Math.Sqrt(d: float) : float</div>
<div class="tip" id="fs110">val locations : Place list<br /><br />Full name: Index.locations</div>
<div class="tip" id="fs111">type &#39;T list = List&lt;&#39;T&gt;<br /><br />Full name: Microsoft.FSharp.Collections.list&lt;_&gt;</div>
<div class="tip" id="fs112">static member Location.Create : lat:float&lt;degLat&gt; * lng:float&lt;degLng&gt; -&gt; Location</div>
<div class="tip" id="fs113">val lookupLocation : city:City -&gt; Place<br /><br />Full name: Index.lookupLocation</div>
<div class="tip" id="fs114">val city : City</div>
<div class="tip" id="fs115">Multiple items<br />module List<br /><br />from Microsoft.FSharp.Collections<br /><br />--------------------<br />type List&lt;&#39;T&gt; =<br />&#160;&#160;| ( [] )<br />&#160;&#160;| ( :: ) of Head: &#39;T * Tail: &#39;T list<br />&#160;&#160;interface IEnumerable<br />&#160;&#160;interface IEnumerable&lt;&#39;T&gt;<br />&#160;&#160;member GetSlice : startIndex:int option * endIndex:int option -&gt; &#39;T list<br />&#160;&#160;member Head : &#39;T<br />&#160;&#160;member IsEmpty : bool<br />&#160;&#160;member Item : index:int -&gt; &#39;T with get<br />&#160;&#160;member Length : int<br />&#160;&#160;member Tail : &#39;T list<br />&#160;&#160;static member Cons : head:&#39;T * tail:&#39;T list -&gt; &#39;T list<br />&#160;&#160;static member Empty : &#39;T list<br /><br />Full name: Microsoft.FSharp.Collections.List&lt;_&gt;</div>
<div class="tip" id="fs116">val find : predicate:(&#39;T -&gt; bool) -&gt; list:&#39;T list -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Collections.List.find</div>
<div class="tip" id="fs117">val x : Place</div>
<div class="tip" id="fs118">val lookupLocations : start:City * dest:City -&gt; Place * Place<br /><br />Full name: Index.lookupLocations</div>
<div class="tip" id="fs119">val start : City</div>
<div class="tip" id="fs120">val dest : City</div>
<div class="tip" id="fs121">val findDistance : start:Location * dest:Location -&gt; float&lt;m&gt;<br /><br />Full name: Index.findDistance</div>
<div class="tip" id="fs122">val start : Location</div>
<div class="tip" id="fs123">val dest : Location</div>
<div class="tip" id="fs124">module GeoCoordinate<br /><br />from Index</div>
<div class="tip" id="fs125">val tryFindDistance : Place * Place -&gt; float&lt;m&gt; option<br /><br />Full name: Index.tryFindDistance</div>
<div class="tip" id="fs126">val metersToFeet : input:float&lt;m&gt; -&gt; float&lt;ft&gt;<br /><br />Full name: Index.metersToFeet</div>
<div class="tip" id="fs127">val input : float&lt;m&gt;</div>
<div class="tip" id="fs128">val workflow : (City * City -&gt; float&lt;ft&gt; option)<br /><br />Full name: Index.workflow</div>
<div class="tip" id="fs129">module Option<br /><br />from Microsoft.FSharp.Core</div>
<div class="tip" id="fs130">val map : mapping:(&#39;T -&gt; &#39;U) -&gt; option:&#39;T option -&gt; &#39;U option<br /><br />Full name: Microsoft.FSharp.Core.Option.map</div>
<div class="tip" id="fs131">val serializePlace : _arg1:Place -&gt; string<br /><br />Full name: Index.serializePlace</div>
<div class="tip" id="fs132">val loc : Location</div>
<div class="tip" id="fs133">val serializeResult : place1:Place -&gt; place2:Place -&gt; distance:float&lt;&#39;u&gt; option -&gt; string<br /><br />Full name: Index.serializeResult</div>
<div class="tip" id="fs134">val place1 : Place</div>
<div class="tip" id="fs135">val place2 : Place</div>
<div class="tip" id="fs136">val distance : float&lt;&#39;u&gt; option</div>
<div class="tip" id="fs137">val place1&#39; : string</div>
<div class="tip" id="fs138">val place2&#39; : string</div>
<div class="tip" id="fs139">val d : float&lt;&#39;u&gt;</div>
<div class="tip" id="fs140">val receiveInput : start:City * dest:City -&gt; string<br /><br />Full name: Index.receiveInput</div>
<div class="tip" id="fs141">val start&#39; : Place</div>
<div class="tip" id="fs142">val dest&#39; : Place</div>
<div class="tip" id="fs143">val calculateDistance : start:Place * dest:Place -&gt; string<br /><br />Full name: Index.calculateDistance</div>
<div class="tip" id="fs144">val start : Place</div>
<div class="tip" id="fs145">val dest : Place</div>
<div class="tip" id="fs146">val distance : float&lt;m&gt;</div>
<div class="tip" id="fs147">val showPlacesWithDistanceInMeters : start:Place * dest:Place * distance:float&lt;m&gt; -&gt; string<br /><br />Full name: Index.showPlacesWithDistanceInMeters</div>
<div class="tip" id="fs148">val showPlaces : start:Place * dest:Place * distance:float&lt;ft&gt; option -&gt; string<br /><br />Full name: Index.showPlaces</div>
<div class="tip" id="fs149">val distance : float&lt;ft&gt; option</div>
<div class="tip" id="fs150">type Stage =<br />&#160;&#160;| AwaitingInput<br />&#160;&#160;| InputReceived of start: City * dest: City<br />&#160;&#160;| Located of start: Place * dest: Place<br />&#160;&#160;| Calculated of Place * Place * float&lt;m&gt; option<br />&#160;&#160;| Show of Place * Place * float&lt;ft&gt; option<br /><br />Full name: Index.Stage</div>
<div class="tip" id="fs151">union case Stage.AwaitingInput: Stage</div>
<div class="tip" id="fs152">union case Stage.InputReceived: start: City * dest: City -&gt; Stage</div>
<div class="tip" id="fs153">union case Stage.Located: start: Place * dest: Place -&gt; Stage</div>
<div class="tip" id="fs154">union case Stage.Calculated: Place * Place * float&lt;m&gt; option -&gt; Stage</div>
<div class="tip" id="fs155">Multiple items<br />union case Stage.Show: Place * Place * float&lt;ft&gt; option -&gt; Stage<br /><br />--------------------<br />type Show = Place * Place * float&lt;ft&gt; option -&gt; string<br /><br />Full name: Index.Show</div>
<div class="tip" id="fs156">type RunWorkflow = Stage -&gt; string<br /><br />Full name: Index.RunWorkflow</div>
<div class="tip" id="fs157">val runWorkflow : _arg1:Stage -&gt; string<br /><br />Full name: Index.runWorkflow</div>
<div class="tip" id="fs158">val distance : float&lt;m&gt; option</div>

        <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">
            <section >
<h1>Domain Modeling with Types</h1>
<a href="http://fsharp.org/"><img alt="F# Software Foundation" src="images/fssf.png" /></a>
</section>
<section >
<h2>Ryan Riley</h2>
<img alt="Tachyus logo" src="images/tachyus.png" style="background-color:#fff;" />
<h3><a href="https://twitter.com/panesofglass">@panesofglass</a></h3>
<h3><a href="https://github.com/panesofglass">github/panesofglass</a></h3>
</section>
<section >
<h1>Objective</h1>
<h2>Visualize distance between two cities by their geographic coordinates.</h2>
</section>
<section >
<h1>Process</h1>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">(<span onmouseout="hideTip(event, 'fs59', 502)" onmouseover="showTip(event, 'fs59', 502)" class="p">City</span> <span class="s">&quot;Houston, TX&quot;</span>, <span onmouseout="hideTip(event, 'fs59', 503)" onmouseover="showTip(event, 'fs59', 503)" class="p">City</span> <span class="s">&quot;San Mateo, CA&quot;</span>)
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs118', 504)" onmouseover="showTip(event, 'fs118', 504)" class="f">lookupLocations</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs125', 505)" onmouseover="showTip(event, 'fs125', 505)" class="f">tryFindDistance</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs129', 506)" onmouseover="showTip(event, 'fs129', 506)" class="t">Option</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs130', 507)" onmouseover="showTip(event, 'fs130', 507)" class="f">map</span> <span onmouseout="hideTip(event, 'fs126', 508)" onmouseover="showTip(event, 'fs126', 508)" class="f">metersToFeet</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
This pipeline shows that we want to take a list of two Cities as inputs,<br/>
translate those cities into locations,<br/>
and finally calculate the distance (in feet).<br/>
</aside>
</section>
<section >
<h1>Goal 1</h1>
<h2>Define <code>City</code></h2>
</section>
<section >
<h2>Simplest thing possible (C#)</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="cs"><span class="k">using</span> City <span class="o">=</span> <span class="k">string</span>;
</code></pre></td></tr></table>
</section>
<section >
<h2>Simplest thing possible (F#)</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">module</span> <span class="t">Alias</span> <span class="o">=</span>
    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="t">City</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="t">string</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h2>Does this really help?</h2>
<aside class="notes">
Maybe: you get better documentation throughout your code;<br/>
however, you don't get any type safety.<br/>
</aside>
</section>
<section >
<h2>Can we do better?</h2>
</section>
<section >
<h2>Single-case union types</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">module</span> <span class="t">SingleCase</span> <span class="o">=</span>
    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="t">City</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 4)" onmouseover="showTip(event, 'fs3', 4)" class="p">City</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs2', 5)" onmouseover="showTip(event, 'fs2', 5)" class="t">string</span>
</code></pre></td>
</tr>
</table>
<p>Extract the value via pattern matching:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs4', 6)" onmouseover="showTip(event, 'fs4', 6)" class="i">city</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs3', 7)" onmouseover="showTip(event, 'fs3', 7)" class="p">City</span> <span class="s">&quot;Houston, TX&quot;</span>
    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs5', 8)" onmouseover="showTip(event, 'fs5', 8)" class="f">cityName</span> (<span onmouseout="hideTip(event, 'fs3', 9)" onmouseover="showTip(event, 'fs3', 9)" class="p">City</span> <span onmouseout="hideTip(event, 'fs6', 10)" onmouseover="showTip(event, 'fs6', 10)" class="i">name</span>) <span class="o">=</span> <span class="i">name</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">let</span> <span onmouseout="hideTip(event, 'fs7', 11)" onmouseover="showTip(event, 'fs7', 11)" class="i">result</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs5', 12)" onmouseover="showTip(event, 'fs5', 12)" class="f">cityName</span> <span onmouseout="hideTip(event, 'fs4', 13)" onmouseover="showTip(event, 'fs4', 13)" class="i">city</span>
</code></pre></td>
</tr>
</table>
<p>Value of result:</p>
<table class="pre"><tr><td><pre><code>No value has been returned</code></pre></td></tr></table>
</section>
<section >
<h1>Goal 2</h1>
<h2>Define a <code>Location</code> type</h2>
</section>
<section >
<h2>Option 1: Is-A</h2>
<aside class="notes">
A very common solution is to use the is-a approach,<br/>
in which you declare something is some other thing.<br/>
</aside>
</section>
<section >
<h2><code>ILocatable</code> interface</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="cs"><span class="k">public</span> <span class="k">interface</span> ILocatable {
    <span class="k">float</span> Latitude { get; }
    <span class="k">float</span> Longitude { get; }
}
</code></pre></td></tr></table>
<aside class="notes">
Is-a usually involves defining interfaces.<br/>
The interface, common in C#, Java, and now TypeScript,<br/>
doesn't define anything other than a contract to be implemented.<br/>
</aside>
</section>
<section >
<h2><code>Place</code> type (C#)</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="cs"><span class="k">public</span> <span class="k">class</span> Place <span class="o">:</span> ILocatable {
    <span class="k">public</span> City Name { get; set; }
    <span class="k">public</span> <span class="k">float</span> Latitude { get; set; }
    <span class="k">public</span> <span class="k">float</span> Longitude { get; set; }
}
</code></pre></td></tr></table>
<aside class="notes">
Here's a Place type in C# using the ILocatable interface<br/>
and auto-generated properties. Note that many OO languages<br/>
allow you to implicitly implement interfaces, as I've done<br/>
here.<br/>
</aside>
</section>
<section >
<h2><code>ILocatable</code> interface (F#)</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs8', 14)" onmouseover="showTip(event, 'fs8', 14)" class="t">ILocatable</span> <span class="o">=</span>
    <span class="k">abstract</span> <span onmouseout="hideTip(event, 'fs9', 15)" onmouseover="showTip(event, 'fs9', 15)" class="i">Latitude</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 16)" onmouseover="showTip(event, 'fs10', 16)" class="t">float</span>
    <span class="k">abstract</span> <span onmouseout="hideTip(event, 'fs11', 17)" onmouseover="showTip(event, 'fs11', 17)" class="i">Longitude</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 18)" onmouseover="showTip(event, 'fs10', 18)" class="t">float</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h2><code>Place</code> type (F#)</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">module</span> <span class="t">FirstTry</span> <span class="o">=</span>

    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs12', 19)" onmouseover="showTip(event, 'fs12', 19)" class="t">Place</span> <span class="o">=</span>
        { <span onmouseout="hideTip(event, 'fs13', 20)" onmouseover="showTip(event, 'fs13', 20)" class="i">Name</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs2', 21)" onmouseover="showTip(event, 'fs2', 21)" class="t">string</span>
          <span onmouseout="hideTip(event, 'fs14', 22)" onmouseover="showTip(event, 'fs14', 22)" class="i">Latitude</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 23)" onmouseover="showTip(event, 'fs10', 23)" class="t">float</span>
          <span onmouseout="hideTip(event, 'fs15', 24)" onmouseover="showTip(event, 'fs15', 24)" class="i">Longitude</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 25)" onmouseover="showTip(event, 'fs10', 25)" class="t">float</span> }
        <span class="k">interface</span> <span onmouseout="hideTip(event, 'fs8', 26)" onmouseover="showTip(event, 'fs8', 26)" class="t">ILocatable</span> <span class="k">with</span>
            <span class="k">member</span> <span onmouseout="hideTip(event, 'fs16', 27)" onmouseover="showTip(event, 'fs16', 27)" class="i">this</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs17', 28)" onmouseover="showTip(event, 'fs17', 28)" class="i">Latitude</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs16', 29)" onmouseover="showTip(event, 'fs16', 29)" class="i">this</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs14', 30)" onmouseover="showTip(event, 'fs14', 30)" class="i">Latitude</span>
            <span class="k">member</span> <span onmouseout="hideTip(event, 'fs16', 31)" onmouseover="showTip(event, 'fs16', 31)" class="i">this</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs18', 32)" onmouseover="showTip(event, 'fs18', 32)" class="i">Longitude</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs16', 33)" onmouseover="showTip(event, 'fs16', 33)" class="i">this</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs15', 34)" onmouseover="showTip(event, 'fs15', 34)" class="i">Longitude</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Here's a similar implementation in F#.<br/>
F# forces explicit interface implementation. Further,<br/>
F# does not implicitly cast to an interface, so you have<br/>
to do a bit more work. In other words, F# forces you to<br/>
be explicit with your types. As we'll see, this can be<br/>
a good way to encourage you to move to better practices.<br/>
</aside>
</section>
<section >
<h2>What could go wrong?</h2>
<ol>
<li>Latitude or longitude not provided</li>
<li>Latitude and longitude mixed up</li>
<li>Invalid city and location values</li>
</ol>
</section>
<section >
<h2>1. Handling missing values</h2>
<p>Examples:</p>
<ul>
<li>Atlantis</li>
<li>Camelot</li>
</ul>
</section>
<section >
<h2>C# version:</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="cs"><span class="k">class</span> Locatable <span class="o">:</span> ILocatable {
    <span class="k">public</span> <span class="k">float</span> Latitude { get; set; }
    <span class="k">public</span> <span class="k">float</span> Longitude { get; set; }
}

<span class="k">public</span> <span class="k">class</span> Place {
    <span class="k">public</span> City Name { get; set; }
    <span class="k">public</span> <span class="k">float</span>? Latitude { get; set; }
    <span class="k">public</span> <span class="k">float</span>? Longitude { get; set; }
    <span class="k">public</span> ILocatable GetLocation() {
        <span class="k">if</span> (Latitude.HasValue <span class="o">&amp;</span><span class="o">&amp;</span> Longitude.HasValue) {
            <span class="k">return</span> <span class="k">new</span> Locatable {
                Latitude <span class="o">=</span> Latitude.Value,
                Longitude <span class="o">=</span> Longitude.Value
            };
        } <span class="k">else</span> {
            <span class="k">return</span> <span class="k">null</span>; <span class="c">// Oh noes!</span>
        }
    }
}
</code></pre></td></tr></table>
</section>
<section >
<h2>F# <code>Place</code> with optional <code>ILocatable</code></h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">module</span> <span class="t">OptionalLocation</span> <span class="o">=</span>

    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs19', 35)" onmouseover="showTip(event, 'fs19', 35)" class="t">Place</span> <span class="o">=</span>
        { <span onmouseout="hideTip(event, 'fs13', 36)" onmouseover="showTip(event, 'fs13', 36)" class="i">Name</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs2', 37)" onmouseover="showTip(event, 'fs2', 37)" class="t">string</span>
          <span onmouseout="hideTip(event, 'fs20', 38)" onmouseover="showTip(event, 'fs20', 38)" class="i">Latitude</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 39)" onmouseover="showTip(event, 'fs10', 39)" class="t">float</span> <span onmouseout="hideTip(event, 'fs21', 40)" onmouseover="showTip(event, 'fs21', 40)" class="t">option</span>
          <span onmouseout="hideTip(event, 'fs22', 41)" onmouseover="showTip(event, 'fs22', 41)" class="i">Longitude</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 42)" onmouseover="showTip(event, 'fs10', 42)" class="t">float</span> <span onmouseout="hideTip(event, 'fs21', 43)" onmouseover="showTip(event, 'fs21', 43)" class="t">option</span> }
        <span class="k">member</span> <span onmouseout="hideTip(event, 'fs16', 44)" onmouseover="showTip(event, 'fs16', 44)" class="i">this</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs23', 45)" onmouseover="showTip(event, 'fs23', 45)" class="f">GetLocation</span>() <span class="o">:</span> <span onmouseout="hideTip(event, 'fs8', 46)" onmouseover="showTip(event, 'fs8', 46)" class="t">ILocatable</span> <span onmouseout="hideTip(event, 'fs21', 47)" onmouseover="showTip(event, 'fs21', 47)" class="t">option</span> <span class="o">=</span>
            <span class="k">match</span> <span onmouseout="hideTip(event, 'fs16', 48)" onmouseover="showTip(event, 'fs16', 48)" class="i">this</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs20', 49)" onmouseover="showTip(event, 'fs20', 49)" class="i">Latitude</span>, <span onmouseout="hideTip(event, 'fs16', 50)" onmouseover="showTip(event, 'fs16', 50)" class="i">this</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs22', 51)" onmouseover="showTip(event, 'fs22', 51)" class="i">Longitude</span> <span class="k">with</span>
            | <span onmouseout="hideTip(event, 'fs24', 52)" onmouseover="showTip(event, 'fs24', 52)" class="p">Some</span> <span onmouseout="hideTip(event, 'fs25', 53)" onmouseover="showTip(event, 'fs25', 53)" class="i">lat</span>, <span onmouseout="hideTip(event, 'fs24', 54)" onmouseover="showTip(event, 'fs24', 54)" class="p">Some</span> <span onmouseout="hideTip(event, 'fs26', 55)" onmouseover="showTip(event, 'fs26', 55)" class="i">lng</span> <span class="k">-&gt;</span>
                { <span class="k">new</span> <span onmouseout="hideTip(event, 'fs8', 56)" onmouseover="showTip(event, 'fs8', 56)" class="t">ILocatable</span> <span class="k">with</span>
                    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs27', 57)" onmouseover="showTip(event, 'fs27', 57)" class="i">this</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs28', 58)" onmouseover="showTip(event, 'fs28', 58)" class="i">Latitude</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs25', 59)" onmouseover="showTip(event, 'fs25', 59)" class="i">lat</span>
                    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs27', 60)" onmouseover="showTip(event, 'fs27', 60)" class="i">this</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs29', 61)" onmouseover="showTip(event, 'fs29', 61)" class="i">Longitude</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs26', 62)" onmouseover="showTip(event, 'fs26', 62)" class="i">lng</span> } <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs24', 63)" onmouseover="showTip(event, 'fs24', 63)" class="p">Some</span>
            | _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs30', 64)" onmouseover="showTip(event, 'fs30', 64)" class="p">None</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h2>How would you handle?</h2>
<ol>
<li>supporting both surface and downhole locations</li>
<li>adding x/y coordinate locations for grid rendering</li>
</ol>
</section>
<section >
<section >
<h2>Is-A Falls Apart</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="cs"><span class="k">public</span> <span class="k">interface</span> IDownhole {
    <span class="k">float</span> DHLatitude { get; }
    <span class="k">float</span> DHLongitude { get; }
}
<span class="k">public</span> <span class="k">interface</span> IXYCoord {
    <span class="k">float</span> X { get; }
    <span class="k">float</span> Y { get; }
}
<span class="k">public</span> <span class="k">class</span> Place <span class="o">:</span> ILocatable, IDownhole, IXYCoord {
    <span class="k">public</span> City Name { get; set; }
    <span class="k">public</span> <span class="k">float</span> Latitude { get; set; }
    <span class="k">public</span> <span class="k">float</span> Longitude { get; set; }
    <span class="k">public</span> <span class="k">float</span> DHLatitude { get; set; }
    <span class="k">public</span> <span class="k">float</span> DHLongitude { get; set; }
    <span class="k">public</span> <span class="k">float</span> X { get; set; }
    <span class="k">public</span> <span class="k">float</span> Y { get; set; }
}
</code></pre></td></tr></table>
<aside class="notes">
This goes back to the less rigorous approach simply to try to fit it on the screen.<br/>
Note the weird names for DHLatitude and DHLongitude. We probably wouldn't do that,<br/>
but what might you do instead? Naming is already hard, and you typically find strange<br/>
things like this in mature OO codebases. At least, I have. And I've written such<br/>
craziness in the past for lack of a better idea.<br/>
</aside>
</section>
<section >
<h2>Can at least create a new instance with all values.</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="cs"><span class="k">var</span> place <span class="o">=</span> <span class="k">new</span> Place {
    Name <span class="o">=</span> <span class="s">"Houston, TX"</span>,
    Latitude <span class="o">=</span> <span class="n">29.760427</span>,
    Longitude <span class="o">=</span> <span class="n">-95.369803</span>,
    DHLatitude <span class="o">=</span> <span class="n">29.760445</span>,
    DHLongitude <span class="o">=</span> <span class="n">-95.369798</span>,
    X <span class="o">=</span> <span class="n">100</span>,
    Y <span class="o">=</span> <span class="n">150</span>
};
</code></pre></td></tr></table>
</section>
<section >
<h2>Is-A Fails</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="cs"><span class="k">public</span> <span class="k">interface</span> IDownhole {
    <span class="k">float</span> Latitude { get; }
    <span class="k">float</span> Longitude { get; }
}
<span class="k">public</span> <span class="k">class</span> Place <span class="o">:</span> ILocatable, IDownhole, IXYCoord {
    <span class="k">public</span> City Name { get; set; }
    <span class="k">public</span> <span class="k">float</span> ILocatable.Latitude { get; set; }
    <span class="k">public</span> <span class="k">float</span> ILocatable.Longitude { get; set; }
    <span class="k">public</span> <span class="k">float</span> IDownhole.Latitude { get; set; }
    <span class="k">public</span> <span class="k">float</span> IDownhole.Longitude { get; set; }
    <span class="k">public</span> <span class="k">float</span> IXYCoord.X { get; set; }
    <span class="k">public</span> <span class="k">float</span> IXYCoord.Y { get; set; }
}
</code></pre></td></tr></table>
</section>
<section >
<h2>Lose ability to create complete instance</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="cs"><span class="c">// Can only set City when creating a new Place.</span>
<span class="k">var</span> place <span class="o">=</span> <span class="k">new</span> Place { Name <span class="o">=</span> <span class="s">"Houston, TX"</span> };
<span class="c">// Cast to set remaining properties.</span>
<span class="k">var</span> locatable <span class="o">=</span> (ILocatable)place;
locatable.Latitude <span class="o">=</span> <span class="n">29.760427</span>;
locatable.Longitude <span class="o">=</span> <span class="n">-95.369803</span>&lt;degLng&gt;
</code></pre></td></tr></table>
<aside class="notes">
Now we've done it! We lost nearly all the benefits in order to use<br/>
better names. This really is not working well.<br/>
</aside>
</section>
</section>
<section >
<h2>Can we do better?</h2>
</section>
<section >
<h2>Rethinking <code>ILocatable</code></h2>
<h3>"Is-a" vs. "Has-a"</h3>
</section>
<section >
<h2><code>Latitude</code> and <code>Longitude</code> belong together</h2>
</section>
<section >
<h2>Refactored <code>Place</code> type (C#)</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="cs"><span class="k">public</span> <span class="k">class</span> Location {
    <span class="k">public</span> <span class="k">float</span> Latitude { get; set; }
    <span class="k">public</span> <span class="k">float</span> Longitude { get; set; }
}

<span class="k">public</span> <span class="k">class</span> Place {
    <span class="k">public</span> City Name { get; set; }
    <span class="k">public</span> Location Location { get; set; }
}
</code></pre></td></tr></table>
</section>
<section >
<h2>Note: "optional" indicated by a <code>null</code></h2>
</section>
<section >
<h2>Re-refactored <code>Place</code> type (C#)</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="cs"><span class="k">public</span> <span class="k">struct</span> Location {
    <span class="k">public</span> <span class="k">float</span> Latitude;
    <span class="k">public</span> <span class="k">float</span> Longitude;
}

<span class="k">public</span> <span class="k">class</span> Place {
    <span class="k">public</span> City Name { get; set; }
    <span class="k">public</span> Nullable&lt;Location&gt; Location { get; set; }
}
</code></pre></td></tr></table>
<aside class="notes">
We can fix the null by using a struct. In this case, the use<br/>
of a struct and Nullable will work out alright. However, there<br/>
are tradeoffs to using a struct that must be considered for<br/>
each use case.<br/>
</aside>
</section>
<section >
<h2>Refactored <code>Place</code> type (F#)</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">module</span> <span class="t">Revised</span> <span class="o">=</span>

    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs31', 65)" onmouseover="showTip(event, 'fs31', 65)" class="t">Location</span> <span class="o">=</span> { <span onmouseout="hideTip(event, 'fs32', 66)" onmouseover="showTip(event, 'fs32', 66)" class="i">Latitude</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 67)" onmouseover="showTip(event, 'fs10', 67)" class="t">float</span>; <span onmouseout="hideTip(event, 'fs33', 68)" onmouseover="showTip(event, 'fs33', 68)" class="i">Longitude</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 69)" onmouseover="showTip(event, 'fs10', 69)" class="t">float</span> }

    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs34', 70)" onmouseover="showTip(event, 'fs34', 70)" class="t">Place</span> <span class="o">=</span> { <span onmouseout="hideTip(event, 'fs13', 71)" onmouseover="showTip(event, 'fs13', 71)" class="i">Name</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs2', 72)" onmouseover="showTip(event, 'fs2', 72)" class="t">string</span>; <span onmouseout="hideTip(event, 'fs35', 73)" onmouseover="showTip(event, 'fs35', 73)" class="i">Location</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs35', 74)" onmouseover="showTip(event, 'fs35', 74)" class="t">Location</span> <span onmouseout="hideTip(event, 'fs21', 75)" onmouseover="showTip(event, 'fs21', 75)" class="t">option</span> }
</code></pre></td>
</tr>
</table>
</section>
<section >
<h2>Note: No <code>null</code></h2>
</section>
<section >
<h2>How would you handle?</h2>
<ol>
<li>supporting both surface and downhole locations</li>
<li>adding x/y coordinate locations for grid rendering</li>
</ol>
</section>
<section >
<h2>Extended C# <code>Place</code></h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="cs"><span class="k">public</span> <span class="k">struct</span> XYCoord {
    <span class="k">public</span> <span class="k">float</span> X;
    <span class="k">public</span> <span class="k">float</span> Y;
}
<span class="k">public</span> <span class="k">class</span> Place {
    <span class="k">public</span> City Name { get; set; }
    <span class="k">public</span> Nullable&lt;Location&gt; Surface { get; set; }
    <span class="k">public</span> Nullable&lt;Location&gt; Downhole { get; set; }
    <span class="k">public</span> Nullable&lt;XYCoord&gt; Coord { get; set; }
}
</code></pre></td></tr></table>
</section>
<section >
<h2>Extended F# <code>Place</code></h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">module</span> <span class="t">ExtendedExample</span> <span class="o">=</span>
    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs36', 76)" onmouseover="showTip(event, 'fs36', 76)" class="t">Location</span> <span class="o">=</span> { <span onmouseout="hideTip(event, 'fs32', 77)" onmouseover="showTip(event, 'fs32', 77)" class="i">Latitude</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 78)" onmouseover="showTip(event, 'fs10', 78)" class="t">float</span>; <span onmouseout="hideTip(event, 'fs33', 79)" onmouseover="showTip(event, 'fs33', 79)" class="i">Longitude</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 80)" onmouseover="showTip(event, 'fs10', 80)" class="t">float</span> }
    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs37', 81)" onmouseover="showTip(event, 'fs37', 81)" class="t">XYCoord</span> <span class="o">=</span>  { <span onmouseout="hideTip(event, 'fs38', 82)" onmouseover="showTip(event, 'fs38', 82)" class="i">X</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 83)" onmouseover="showTip(event, 'fs10', 83)" class="t">float</span>; <span onmouseout="hideTip(event, 'fs39', 84)" onmouseover="showTip(event, 'fs39', 84)" class="i">Y</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 85)" onmouseover="showTip(event, 'fs10', 85)" class="t">float</span> }
    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs40', 86)" onmouseover="showTip(event, 'fs40', 86)" class="t">Place</span> <span class="o">=</span> {
        <span onmouseout="hideTip(event, 'fs13', 87)" onmouseover="showTip(event, 'fs13', 87)" class="i">Name</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs2', 88)" onmouseover="showTip(event, 'fs2', 88)" class="t">string</span>
        <span onmouseout="hideTip(event, 'fs41', 89)" onmouseover="showTip(event, 'fs41', 89)" class="i">Surface</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs36', 90)" onmouseover="showTip(event, 'fs36', 90)" class="t">Location</span> <span onmouseout="hideTip(event, 'fs21', 91)" onmouseover="showTip(event, 'fs21', 91)" class="t">option</span>
        <span onmouseout="hideTip(event, 'fs42', 92)" onmouseover="showTip(event, 'fs42', 92)" class="i">Downhole</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs36', 93)" onmouseover="showTip(event, 'fs36', 93)" class="t">Location</span> <span onmouseout="hideTip(event, 'fs21', 94)" onmouseover="showTip(event, 'fs21', 94)" class="t">option</span>
        <span onmouseout="hideTip(event, 'fs43', 95)" onmouseover="showTip(event, 'fs43', 95)" class="i">Coord</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs37', 96)" onmouseover="showTip(event, 'fs37', 96)" class="t">XYCoord</span> <span onmouseout="hideTip(event, 'fs21', 97)" onmouseover="showTip(event, 'fs21', 97)" class="t">option</span>
    }
</code></pre></td>
</tr>
</table>
</section>
<section >
<h2>Has-a preferred to Is-a</h2>
<h3>"Composition over inheritance"</h3>
</section>
<section >
<h2>2. Mixing up latitude and longitude</h2>
</section>
<section >
<h2>Sadly we will have to leave C# behind</h2>
</section>
<section >
<h2>Units of measure</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">[&lt;<span onmouseout="hideTip(event, 'fs44', 98)" onmouseover="showTip(event, 'fs44', 98)" class="t">Measure</span>&gt;] <span class="k">type</span> <span onmouseout="hideTip(event, 'fs45', 99)" onmouseover="showTip(event, 'fs45', 99)" class="t">degLat</span>
[&lt;<span onmouseout="hideTip(event, 'fs44', 100)" onmouseover="showTip(event, 'fs44', 100)" class="t">Measure</span>&gt;] <span class="k">type</span> <span onmouseout="hideTip(event, 'fs46', 101)" onmouseover="showTip(event, 'fs46', 101)" class="t">degLng</span>

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs47', 102)" onmouseover="showTip(event, 'fs47', 102)" class="f">degreesLatitude</span> <span onmouseout="hideTip(event, 'fs48', 103)" onmouseover="showTip(event, 'fs48', 103)" class="i">x</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs48', 104)" onmouseover="showTip(event, 'fs48', 104)" class="i">x</span> <span class="o">*</span> <span class="n">1.</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs45', 105)" onmouseover="showTip(event, 'fs45', 105)" class="t">degLat</span><span class="o">&gt;</span>
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs49', 106)" onmouseover="showTip(event, 'fs49', 106)" class="f">degreesLongitude</span> <span onmouseout="hideTip(event, 'fs48', 107)" onmouseover="showTip(event, 'fs48', 107)" class="i">x</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs48', 108)" onmouseover="showTip(event, 'fs48', 108)" class="i">x</span> <span class="o">*</span> <span class="n">1.</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs46', 109)" onmouseover="showTip(event, 'fs46', 109)" class="t">degLng</span><span class="o">&gt;</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h2>Correct <code>Location</code></h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs53', 115)" onmouseover="showTip(event, 'fs53', 115)" class="t">Location</span> <span class="o">=</span> {
        <span onmouseout="hideTip(event, 'fs54', 116)" onmouseover="showTip(event, 'fs54', 116)" class="i">Latitude</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 117)" onmouseover="showTip(event, 'fs10', 117)" class="t">float</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs45', 118)" onmouseover="showTip(event, 'fs45', 118)" class="t">degLat</span><span class="o">&gt;</span>
        <span onmouseout="hideTip(event, 'fs55', 119)" onmouseover="showTip(event, 'fs55', 119)" class="i">Longitude</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 120)" onmouseover="showTip(event, 'fs10', 120)" class="t">float</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs46', 121)" onmouseover="showTip(event, 'fs46', 121)" class="t">degLng</span><span class="o">&gt;</span>
    }

    <span class="k">type</span> <span onmouseout="hideTip(event, 'fs56', 122)" onmouseover="showTip(event, 'fs56', 122)" class="t">Place</span> <span class="o">=</span> { <span onmouseout="hideTip(event, 'fs57', 123)" onmouseover="showTip(event, 'fs57', 123)" class="i">Name</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs3', 124)" onmouseover="showTip(event, 'fs3', 124)" class="t">City</span>; <span onmouseout="hideTip(event, 'fs58', 125)" onmouseover="showTip(event, 'fs58', 125)" class="i">Location</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs58', 126)" onmouseover="showTip(event, 'fs58', 126)" class="t">Location</span> <span onmouseout="hideTip(event, 'fs21', 127)" onmouseover="showTip(event, 'fs21', 127)" class="t">option</span> }
</code></pre></td>
</tr>
</table>
</section>
<section >
<h2><a href="http://fsharpforfunandprofit.com/posts/designing-with-types-making-illegal-states-unrepresentable/">Make illegal states unrepresentable</a></h2>
</section>
<section >
<h2>Types can only get you so far</h2>
<ol>
<li><code>City</code> allows <code>null</code> and <code>""</code></li>
<li><code>Location</code> allows latitude < -90 and > 90</li>
<li><code>Location</code> allows longitude < -180 and > 180</li>
</ol>
</section>
<section >
<h2>3. Valid states</h2>
</section>
<section >
<h2>Revisiting <code>City</code></h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs59', 128)" onmouseover="showTip(event, 'fs59', 128)" class="t">City</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs59', 129)" onmouseover="showTip(event, 'fs59', 129)" class="p">City</span> <span class="k">of</span> <span class="i">name</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs2', 130)" onmouseover="showTip(event, 'fs2', 130)" class="t">string</span>
    <span class="k">with</span>
    <span class="k">static</span> <span class="k">member</span> <span onmouseout="hideTip(event, 'fs60', 131)" onmouseover="showTip(event, 'fs60', 131)" class="f">Create</span> (<span onmouseout="hideTip(event, 'fs6', 132)" onmouseover="showTip(event, 'fs6', 132)" class="i">name</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs2', 133)" onmouseover="showTip(event, 'fs2', 133)" class="t">string</span>) <span class="o">=</span>
        <span class="k">match</span> <span onmouseout="hideTip(event, 'fs6', 134)" onmouseover="showTip(event, 'fs6', 134)" class="i">name</span> <span class="k">with</span>
        | <span class="k">null</span> | <span class="s">&quot;&quot;</span> <span class="k">-&gt;</span>
            <span onmouseout="hideTip(event, 'fs61', 135)" onmouseover="showTip(event, 'fs61', 135)" class="f">invalidArg</span> <span class="s">&quot;Invalid city&quot;</span>
                <span class="s">&quot;The city name cannot be null or empty.&quot;</span>
        | <span onmouseout="hideTip(event, 'fs62', 136)" onmouseover="showTip(event, 'fs62', 136)" class="i">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs59', 137)" onmouseover="showTip(event, 'fs59', 137)" class="p">City</span> <span onmouseout="hideTip(event, 'fs62', 138)" onmouseover="showTip(event, 'fs62', 138)" class="i">x</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Without a city lookup, we are stuck with a minimal<br/>
validation for the city name. We could add a bit<br/>
more, such as requiring one or more commas, but<br/>
this provides the general idea.<br/>
</aside>
</section>
<section >
<h2>Better than nothing</h2>
</section>
<section >
<h2>Revisiting <code>Location</code></h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs63', 139)" onmouseover="showTip(event, 'fs63', 139)" class="t">Location</span> <span class="o">=</span>
    <span class="k">internal</span> { <span onmouseout="hideTip(event, 'fs64', 140)" onmouseover="showTip(event, 'fs64', 140)" class="i">latitude</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 141)" onmouseover="showTip(event, 'fs10', 141)" class="t">float</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs45', 142)" onmouseover="showTip(event, 'fs45', 142)" class="t">degLat</span><span class="o">&gt;</span>; <span onmouseout="hideTip(event, 'fs65', 143)" onmouseover="showTip(event, 'fs65', 143)" class="i">longitude</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 144)" onmouseover="showTip(event, 'fs10', 144)" class="t">float</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs46', 145)" onmouseover="showTip(event, 'fs46', 145)" class="t">degLng</span><span class="o">&gt;</span> }
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs66', 146)" onmouseover="showTip(event, 'fs66', 146)" class="i">this</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs67', 147)" onmouseover="showTip(event, 'fs67', 147)" class="i">Latitude</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs66', 148)" onmouseover="showTip(event, 'fs66', 148)" class="i">this</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs64', 149)" onmouseover="showTip(event, 'fs64', 149)" class="i">latitude</span>
    <span class="k">member</span> <span onmouseout="hideTip(event, 'fs66', 150)" onmouseover="showTip(event, 'fs66', 150)" class="i">this</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs68', 151)" onmouseover="showTip(event, 'fs68', 151)" class="i">Longitude</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs66', 152)" onmouseover="showTip(event, 'fs66', 152)" class="i">this</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs65', 153)" onmouseover="showTip(event, 'fs65', 153)" class="i">longitude</span>
    <span class="k">static</span> <span class="k">member</span> <span onmouseout="hideTip(event, 'fs69', 154)" onmouseover="showTip(event, 'fs69', 154)" class="f">Create</span> (<span onmouseout="hideTip(event, 'fs70', 155)" onmouseover="showTip(event, 'fs70', 155)" class="i">lat</span>, <span onmouseout="hideTip(event, 'fs71', 156)" onmouseover="showTip(event, 'fs71', 156)" class="i">lng</span>) <span class="o">=</span>
        <span class="k">if</span> <span class="o">-</span><span class="n">90.</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs45', 157)" onmouseover="showTip(event, 'fs45', 157)" class="t">degLat</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs70', 158)" onmouseover="showTip(event, 'fs70', 158)" class="i">lat</span> <span class="o">||</span> <span onmouseout="hideTip(event, 'fs70', 159)" onmouseover="showTip(event, 'fs70', 159)" class="i">lat</span> <span class="o">&gt;</span> <span class="n">90.</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs45', 160)" onmouseover="showTip(event, 'fs45', 160)" class="t">degLat</span><span class="o">&gt;</span> <span class="k">then</span>
            <span onmouseout="hideTip(event, 'fs61', 161)" onmouseover="showTip(event, 'fs61', 161)" class="f">invalidArg</span> <span class="s">&quot;lat&quot;</span>
                <span class="s">&quot;Latitude must be within the range -90 to 90.&quot;</span>
        <span class="k">elif</span> <span class="o">-</span><span class="n">180.</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs46', 162)" onmouseover="showTip(event, 'fs46', 162)" class="t">degLng</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs71', 163)" onmouseover="showTip(event, 'fs71', 163)" class="i">lng</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs71', 164)" onmouseover="showTip(event, 'fs71', 164)" class="i">lng</span> <span class="o">&gt;</span> <span class="n">180.</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs46', 165)" onmouseover="showTip(event, 'fs46', 165)" class="t">degLng</span><span class="o">&gt;</span> <span class="k">then</span>
            <span onmouseout="hideTip(event, 'fs61', 166)" onmouseover="showTip(event, 'fs61', 166)" class="f">invalidArg</span> <span class="s">&quot;lng&quot;</span>
                <span class="s">&quot;Longitude must be within the range -180 to 180.&quot;</span>
        <span class="k">else</span> { <span class="i">latitude</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs70', 167)" onmouseover="showTip(event, 'fs70', 167)" class="i">lat</span>; <span class="i">longitude</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs71', 168)" onmouseover="showTip(event, 'fs71', 168)" class="i">lng</span> }
</code></pre></td>
</tr>
</table>
<aside class="notes">
This may look strange as we are now hiding<br/>
the record we previously used. However, we<br/>
retain immutability and add validation.<br/>
</aside>
</section>
<section >
<h2>Revisiting <code>Place</code></h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs76', 176)" onmouseover="showTip(event, 'fs76', 176)" class="t">Place</span> <span class="o">=</span> { <span onmouseout="hideTip(event, 'fs57', 177)" onmouseover="showTip(event, 'fs57', 177)" class="i">Name</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs59', 178)" onmouseover="showTip(event, 'fs59', 178)" class="t">City</span>; <span onmouseout="hideTip(event, 'fs77', 179)" onmouseover="showTip(event, 'fs77', 179)" class="i">Location</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs77', 180)" onmouseover="showTip(event, 'fs77', 180)" class="t">Location</span> <span onmouseout="hideTip(event, 'fs21', 181)" onmouseover="showTip(event, 'fs21', 181)" class="t">option</span> }
</code></pre></td>
</tr>
</table>
</section>
<section >
<h2><code>Place</code> still has yet to change</h2>
<h3>Single Responsibility Principle</h3>
<aside class="notes">
Place doesn't really change except to swap<br/>
Name : string for Name : City<br/>
This is exactly the goal of SRP.<br/>
</aside>
</section>
<section >
<h2>Further study: Contracts and Dependent Types</h2>
<ul>
<li><a href="http://research.microsoft.com/en-us/projects/contracts/">Code Contracts</a></li>
<li><a href="https://fstar-lang.org/">F*</a></li>
<li><a href="http://research.microsoft.com/en-us/um/people/nswamy/papers/tstar.pdf">TS*</a></li>
<li><a href="http://www.idris-lang.org/">Idris</a></li>
</ul>
<aside class="notes">
We have seen that the F# type system can<br/>
get us pretty far along our way. <br/>
We had to resort to constructor functions<br/>
to provide more rigid validation.<br/>
</aside>
<aside class="notes">
Note that we can still create an invalid `City`.<br/>
However, if we privatize the union, we can't<br/>
retrieve the name via pattern matching.<br/>
</aside>
<aside class="notes">
Some languages offer additional type system<br/>
constructs to do these validations. Code contracts,<br/>
originally from Eiffel, offer one form of this.<br/>
Newer languages have also been working on a concpt<br/>
called dependent types or refinement types. These<br/>
allow you to further specify the range of values<br/>
allowed, as we have done above using our<br/>
constructor functions. I've listed a few examples<br/>
in case you wish to study these further.<br/>
</aside>
</section>
<section >
<h1>Goal 3: Processing Requests</h1>
</section>
<section >
<h2>Process</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">(<span onmouseout="hideTip(event, 'fs59', 502)" onmouseover="showTip(event, 'fs59', 502)" class="p">City</span> <span class="s">&quot;Houston, TX&quot;</span>, <span onmouseout="hideTip(event, 'fs59', 503)" onmouseover="showTip(event, 'fs59', 503)" class="p">City</span> <span class="s">&quot;San Mateo, CA&quot;</span>)
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs118', 504)" onmouseover="showTip(event, 'fs118', 504)" class="f">lookupLocations</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs125', 505)" onmouseover="showTip(event, 'fs125', 505)" class="f">tryFindDistance</span>
<span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs129', 506)" onmouseover="showTip(event, 'fs129', 506)" class="t">Option</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs130', 507)" onmouseover="showTip(event, 'fs130', 507)" class="f">map</span> <span onmouseout="hideTip(event, 'fs126', 508)" onmouseover="showTip(event, 'fs126', 508)" class="f">metersToFeet</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
This pipeline shows that we want to take a list of two Cities as inputs,<br/>
translate those cities into locations,<br/>
and finally calculate the distance (in feet).<br/>
</aside>
</section>
<section >
<h2>How do we translate?</h2>
<ul>
<li>User input: two cities</li>
<li>Calculation input: two places</li>
<li>Unit conversion: meters -&gt; feet</li>
</ul>
</section>
<section >
<h2>Start with types</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">type</span> <span onmouseout="hideTip(event, 'fs80', 186)" onmouseover="showTip(event, 'fs80', 186)" class="t">LookupLocations</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs59', 187)" onmouseover="showTip(event, 'fs59', 187)" class="t">City</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs59', 188)" onmouseover="showTip(event, 'fs59', 188)" class="t">City</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs76', 189)" onmouseover="showTip(event, 'fs76', 189)" class="t">Place</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs76', 190)" onmouseover="showTip(event, 'fs76', 190)" class="t">Place</span>

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs81', 191)" onmouseover="showTip(event, 'fs81', 191)" class="t">TryFindDistance</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs76', 192)" onmouseover="showTip(event, 'fs76', 192)" class="t">Place</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs76', 193)" onmouseover="showTip(event, 'fs76', 193)" class="t">Place</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs10', 194)" onmouseover="showTip(event, 'fs10', 194)" class="t">float</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs78', 195)" onmouseover="showTip(event, 'fs78', 195)" class="t">m</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs21', 196)" onmouseover="showTip(event, 'fs21', 196)" class="t">option</span>

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs82', 197)" onmouseover="showTip(event, 'fs82', 197)" class="t">MetersToFeet</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs10', 198)" onmouseover="showTip(event, 'fs10', 198)" class="t">float</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs78', 199)" onmouseover="showTip(event, 'fs78', 199)" class="t">m</span><span class="o">&gt;</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs10', 200)" onmouseover="showTip(event, 'fs10', 200)" class="t">float</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs79', 201)" onmouseover="showTip(event, 'fs79', 201)" class="t">ft</span><span class="o">&gt;</span>

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs83', 202)" onmouseover="showTip(event, 'fs83', 202)" class="t">Show</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs76', 203)" onmouseover="showTip(event, 'fs76', 203)" class="t">Place</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs76', 204)" onmouseover="showTip(event, 'fs76', 204)" class="t">Place</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs10', 205)" onmouseover="showTip(event, 'fs10', 205)" class="t">float</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs79', 206)" onmouseover="showTip(event, 'fs79', 206)" class="t">ft</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs21', 207)" onmouseover="showTip(event, 'fs21', 207)" class="t">option</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs2', 208)" onmouseover="showTip(event, 'fs2', 208)" class="t">string</span>
</code></pre></td>
</tr>
</table>
</section>
<section >
<h2>Lookup coordinates by city name</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs113', 437)" onmouseover="showTip(event, 'fs113', 437)" class="f">lookupLocation</span> <span onmouseout="hideTip(event, 'fs114', 438)" onmouseover="showTip(event, 'fs114', 438)" class="i">city</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs110', 439)" onmouseover="showTip(event, 'fs110', 439)" class="i">locations</span> <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs115', 440)" onmouseover="showTip(event, 'fs115', 440)" class="t">List</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs116', 441)" onmouseover="showTip(event, 'fs116', 441)" class="f">find</span> (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs117', 442)" onmouseover="showTip(event, 'fs117', 442)" class="i">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs117', 443)" onmouseover="showTip(event, 'fs117', 443)" class="i">x</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs57', 444)" onmouseover="showTip(event, 'fs57', 444)" class="i">Name</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs114', 445)" onmouseover="showTip(event, 'fs114', 445)" class="i">city</span>)

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs118', 446)" onmouseover="showTip(event, 'fs118', 446)" class="f">lookupLocations</span> (<span onmouseout="hideTip(event, 'fs119', 447)" onmouseover="showTip(event, 'fs119', 447)" class="i">start</span>, <span onmouseout="hideTip(event, 'fs120', 448)" onmouseover="showTip(event, 'fs120', 448)" class="i">dest</span>) <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs113', 449)" onmouseover="showTip(event, 'fs113', 449)" class="f">lookupLocation</span> <span onmouseout="hideTip(event, 'fs119', 450)" onmouseover="showTip(event, 'fs119', 450)" class="i">start</span>, <span onmouseout="hideTip(event, 'fs113', 451)" onmouseover="showTip(event, 'fs113', 451)" class="f">lookupLocation</span> <span onmouseout="hideTip(event, 'fs120', 452)" onmouseover="showTip(event, 'fs120', 452)" class="i">dest</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs113', 453)" onmouseover="showTip(event, 'fs113', 453)" class="f">lookupLocation</span> (<span onmouseout="hideTip(event, 'fs59', 454)" onmouseover="showTip(event, 'fs59', 454)" class="p">City</span> <span class="s">&quot;Houston, TX&quot;</span>)
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td><pre><code>{Name = City "Houston, TX";
 Location = Some FSI_0058+Location;}</code></pre></td></tr></table>
</section>
<section >
<h2>Calculate Distance</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs121', 467)" onmouseover="showTip(event, 'fs121', 467)" class="f">findDistance</span> (<span onmouseout="hideTip(event, 'fs122', 468)" onmouseover="showTip(event, 'fs122', 468)" class="i">start</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs63', 469)" onmouseover="showTip(event, 'fs63', 469)" class="t">Location</span>, <span onmouseout="hideTip(event, 'fs123', 470)" onmouseover="showTip(event, 'fs123', 470)" class="i">dest</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs63', 471)" onmouseover="showTip(event, 'fs63', 471)" class="t">Location</span>) <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs124', 472)" onmouseover="showTip(event, 'fs124', 472)" class="t">GeoCoordinate</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs105', 473)" onmouseover="showTip(event, 'fs105', 473)" class="f">distance</span> <span onmouseout="hideTip(event, 'fs122', 474)" onmouseover="showTip(event, 'fs122', 474)" class="i">start</span> <span onmouseout="hideTip(event, 'fs123', 475)" onmouseover="showTip(event, 'fs123', 475)" class="i">dest</span>
    
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs125', 476)" onmouseover="showTip(event, 'fs125', 476)" class="f">tryFindDistance</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs81', 477)" onmouseover="showTip(event, 'fs81', 477)" class="t">TryFindDistance</span> <span class="o">=</span> <span class="k">function</span>
    | { <span onmouseout="hideTip(event, 'fs63', 478)" onmouseover="showTip(event, 'fs63', 478)" class="i">Location</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs24', 479)" onmouseover="showTip(event, 'fs24', 479)" class="p">Some</span> <span onmouseout="hideTip(event, 'fs122', 480)" onmouseover="showTip(event, 'fs122', 480)" class="i">start</span> }, { <span onmouseout="hideTip(event, 'fs63', 481)" onmouseover="showTip(event, 'fs63', 481)" class="i">Location</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs24', 482)" onmouseover="showTip(event, 'fs24', 482)" class="p">Some</span> <span onmouseout="hideTip(event, 'fs123', 483)" onmouseover="showTip(event, 'fs123', 483)" class="i">dest</span> } <span class="k">-&gt;</span>
        <span onmouseout="hideTip(event, 'fs121', 484)" onmouseover="showTip(event, 'fs121', 484)" class="f">findDistance</span> (<span onmouseout="hideTip(event, 'fs122', 485)" onmouseover="showTip(event, 'fs122', 485)" class="i">start</span>, <span onmouseout="hideTip(event, 'fs123', 486)" onmouseover="showTip(event, 'fs123', 486)" class="i">dest</span>) <span class="o">|&gt;</span> <span onmouseout="hideTip(event, 'fs24', 487)" onmouseover="showTip(event, 'fs24', 487)" class="p">Some</span>
    | _, _ <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs30', 488)" onmouseover="showTip(event, 'fs30', 488)" class="p">None</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
System.Device.Location.GeoCoordinate has a method<br/>
that uses the Haversine formula, which assumes a<br/>
spherical earth. We could implement this ourselves,<br/>
but why bother when it's already available?<br/>
</aside>
</section>
<section >
<h2>Unit conversion</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp">[&lt;<span onmouseout="hideTip(event, 'fs44', 182)" onmouseover="showTip(event, 'fs44', 182)" class="t">Measure</span>&gt;] <span class="k">type</span> <span onmouseout="hideTip(event, 'fs78', 183)" onmouseover="showTip(event, 'fs78', 183)" class="t">m</span>
[&lt;<span onmouseout="hideTip(event, 'fs44', 184)" onmouseover="showTip(event, 'fs44', 184)" class="t">Measure</span>&gt;] <span class="k">type</span> <span onmouseout="hideTip(event, 'fs79', 185)" onmouseover="showTip(event, 'fs79', 185)" class="t">ft</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs126', 489)" onmouseover="showTip(event, 'fs126', 489)" class="f">metersToFeet</span> (<span onmouseout="hideTip(event, 'fs127', 490)" onmouseover="showTip(event, 'fs127', 490)" class="i">input</span><span class="o">:</span> <span onmouseout="hideTip(event, 'fs10', 491)" onmouseover="showTip(event, 'fs10', 491)" class="t">float</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs78', 492)" onmouseover="showTip(event, 'fs78', 492)" class="t">m</span><span class="o">&gt;</span>) <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs127', 493)" onmouseover="showTip(event, 'fs127', 493)" class="i">input</span> <span class="o">*</span> <span class="n">3.2808399</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs79', 494)" onmouseover="showTip(event, 'fs79', 494)" class="t">ft</span><span class="o">/</span><span onmouseout="hideTip(event, 'fs78', 495)" onmouseover="showTip(event, 'fs78', 495)" class="t">m</span><span class="o">&gt;</span>
</code></pre></td>
</tr>
</table>
<aside class="notes">
Similar to what we saw above, we apply units of measure<br/>
to ensure our results are what we intended. Note that<br/>
here we create a conversion function to handle the conversion.<br/>
</aside>
</section>
<section >
<h2>Wrapping up the steps</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span class="k">let</span> <span onmouseout="hideTip(event, 'fs128', 496)" onmouseover="showTip(event, 'fs128', 496)" class="f">workflow</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs118', 497)" onmouseover="showTip(event, 'fs118', 497)" class="f">lookupLocations</span>
    <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs125', 498)" onmouseover="showTip(event, 'fs125', 498)" class="f">tryFindDistance</span>
    <span class="o">&gt;</span><span class="o">&gt;</span> <span onmouseout="hideTip(event, 'fs129', 499)" onmouseover="showTip(event, 'fs129', 499)" class="t">Option</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs130', 500)" onmouseover="showTip(event, 'fs130', 500)" class="f">map</span> <span onmouseout="hideTip(event, 'fs126', 501)" onmouseover="showTip(event, 'fs126', 501)" class="f">metersToFeet</span>
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs128', 509)" onmouseover="showTip(event, 'fs128', 509)" class="f">workflow</span> (<span onmouseout="hideTip(event, 'fs59', 510)" onmouseover="showTip(event, 'fs59', 510)" class="p">City</span> <span class="s">&quot;Houston, TX&quot;</span>, <span onmouseout="hideTip(event, 'fs59', 511)" onmouseover="showTip(event, 'fs59', 511)" class="p">City</span> <span class="s">&quot;San Mateo, CA&quot;</span>)
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td><pre><code>Some 8625770.416</code></pre></td></tr></table>
<aside class="notes">
Here we use function composition and rely on type<br/>
inference to create a single function to run our<br/>
workflow.<br/>
</aside>
</section>
<section >
<h1>Review</h1>
</section>
<section >
<h2>1. Make illegal states unrepresentable</h2>
<aside class="notes">
The ultimate goal of leveraging a type system should<br/>
be to make invalid states impossible. If you use types<br/>
only for documentation, then you are likely just adding<br/>
noise to your code. Leverage the compiler to cover as<br/>
many of your test cases as possible and avoid the pain<br/>
of debugging or scrambling to fix a production issue.<br/>
</aside>
<aside class="notes">
Perhaps the best example of where developers failed<br/>
was the Mars Climate Orbiter, which was lost because<br/>
of a units error. https://d2cj35nmzi9erd.cloudfront.net/msp98/news/mco990930.html<br/>
</aside>
</section>
<section >
<h2>2. Types define data flow</h2>
<aside class="notes">
Once you have the functions to support each step of your<br/>
program, it's a simple matter of applying composition to<br/>
create a single function to run your program. Use types<br/>
to ensure the data flows through your program correctly.<br/>
</aside>
</section>
<section >
<h2>3. Types can't always get you all the way</h2>
<aside class="notes">
Despite the extent to which we were able to add compile-time<br/>
type checking throughout this little sample, we also saw<br/>
a few cases where types were not able to help us, at least<br/>
not in C# or F#. Some other languages and tools are paving<br/>
the way for improvements, though, and perhaps we'll eventually<br/>
see things like refinement and dependent types in .NET.<br/>
</aside>
<aside class="notes">
Network interruptions, external dependencies, and more are<br/>
still outside the scope of nearly all type systems. We have<br/>
a long way to go, but we should at least start leveraging<br/>
what we have available today.<br/>
</aside>
</section>
<section >
<h1>Resources</h1>
<ul>
<li><a href="http://fsharp.org/">F# Software Foundation</a></li>
<li><a href="http://fsharpforfunandprofit.com/">F# for Fun and Profit</a></li>
<li><a href="http://www.brics.dk/RS/01/23/">Defunctionalization</a></li>
<li><a href="https://www.bing.com/search?q=F%23+domain+driven+design">Search "F# domain driven design"</a></li>
</ul>
</section>
<section >
<h1>Questions?</h1>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs113', 455)" onmouseover="showTip(event, 'fs113', 455)" class="f">lookupLocation</span> (<span onmouseout="hideTip(event, 'fs59', 456)" onmouseover="showTip(event, 'fs59', 456)" class="p">City</span> <span class="s">&quot;Houston, TX&quot;</span>)
</code></pre></td>
</tr>
</table>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="fsharp"><span onmouseout="hideTip(event, 'fs128', 512)" onmouseover="showTip(event, 'fs128', 512)" class="f">workflow</span> (<span onmouseout="hideTip(event, 'fs59', 513)" onmouseover="showTip(event, 'fs59', 513)" class="p">City</span> <span class="s">&quot;Houston, TX&quot;</span>, <span onmouseout="hideTip(event, 'fs59', 514)" onmouseover="showTip(event, 'fs59', 514)" class="p">City</span> <span class="s">&quot;San Mateo, CA&quot;</span>)
</code></pre></td>
</tr>
</table>
</section>


        </div>
    </div>
    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>
    <script>
        // Add the nohighlight class and data-noescape attribute to code elements that have already been formatted by FSharp.Formatting
        $('pre.highlighted code').addClass('nohighlight').attr('data-noescape', '');

        // Full list of configuration options available here:
        // https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            controls: true,
            progress: true,
            history: true,
            center: true,

            transition: 'default', // default/cube/page/concave/zoom/linear/fade/none

            // Parallax scrolling
            // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
            // parallaxBackgroundSize: '2100px 900px',

            // Optional libraries used to extend on reveal.js
            dependencies: [
                { src: 'lib/js/classList.js', condition: function () { return !document.body.classList; } },
                { src: 'plugin/markdown/marked.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: 'plugin/markdown/markdown.js', condition: function () { return !!document.querySelector('[data-markdown]'); } },
                { src: 'plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } },
                { src: 'plugin/zoom-js/zoom.js', async: true, condition: function () { return !!document.body.classList; } },
                { src: 'plugin/notes/notes.js', async: true, condition: function () { return !!document.body.classList; } }
            ]
        });

    </script>
</body>
</html>

